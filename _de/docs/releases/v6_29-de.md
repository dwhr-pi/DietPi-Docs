# Versionshinweise

## Mai 2020 (Version 6.29)

### API-&Auml;nderungen

- Hardware-Info | Die Hardware-Infodatei `/DietPi/dietpi/.hw_model` sollte jetzt unter `/boot/dietpi/.hw_model` aufgerufen werden (siehe DietPi-RAMdisk-Entfernung unten) und enth&auml;lt jetzt Informationen als NAME=VALUE-&auml;hnliche Zeilen, die bezogen werden k&ouml;nnen aus Shell-Skripten.
- Flag/Info-Dateien | `/DietPi/dietpi/.update_available`, `/DietPi/dietpi/.timesync_exit_status`, `/DietPi/dietpi/.network` und `/tmp/.dietpi_motd` wurden alle in ein neues Laufzeitverzeichnis verschoben: `/run /dietpi/`
- DietPi-Globals | Die globalen Variablen `G_HW_ARCH_DESCRIPTION` und `G_HW_MODEL_DESCRIPTION` wurden umbenannt in `G_HW_ARCH_NAME` und `G_HW_MODEL_NAME`. Die neuen Variablen `G_HW_UUID` (DietPi-interne Ger&auml;te-UUID) und `G_ROOTFS_DEV` (RootFS-Ger&auml;tepfad) sind verf&uuml;gbar. Auf RPi sind zus&auml;tzlich `G_HW_REVISION`, `G_HW_PCB_REVISION`, `G_HW_MEMORY_SIZE` und `G_HW_MANUFACTURER` verf&uuml;gbar, der Revisionscode und seine entschl&uuml;sselten Informationen: <https://www.raspberrypi.org/documentation>
- DietPi-Globals | `G_RUN_CMD` und `G_ERROR_HANDLER` wurden entfernt und durch `G_EXEC` ersetzt. Grunds&auml;tzlich kann `G_EXEC` auf die gleiche Weise verwendet werden wie zuvor `G_RUN_CMD` und es ist umfassender konfigurierbar, um die manuelle Verwendung von `G_ERROR_HANDLER` obsolet zu machen, wenn benutzerdefinierte L&ouml;sungsmen&uuml;eintr&auml;ge oder Befehlsausgabenanalyse erforderlich sind, zB um nach Fehlern zu suchen, die nicht zum Beenden f&uuml;hren Codes. Visuelle &Auml;nderung f&uuml;r normale DietPi-Benutzer besteht darin, dass jeder fehlerbehandelte Befehl wiederholt werden kann, eine Subshell ge&ouml;ffnet werden kann, um das urspr&uuml;ngliche Problem zu untersuchen oder zu beheben, und f&uuml;r erfahrene Benutzer der Befehl ge&auml;ndert werden kann, z. B. wenn sich ein Download-Link ge&auml;ndert hat oder ein erwarteter Datei wurde manuell in einen neuen Pfad verschoben. Weitere Details finden Sie im Skript: `/boot/dietpi/func/dietpi-globals`
- DietPi-Globals | `G_FILE_EXISTS` wurde entfernt, da es nur ein einziges Mal in unserem Code verwendet wurde und normalerweise explizit &uuml;berpr&uuml;ft und behandelt werden muss, ob es sich um eine Datei, ein Verzeichnis, einen Symlink mit oder ohne vorhandenes Ziel handelt.
- DietPi-Globals | Die neuen globalen Funktionen `G_CHECK_CON` und `G_CHECK_DNS` wurden hinzugef&uuml;gt, um die allgemeine Netzwerkkonnektivit&auml;t und den DNS-Resolver basierend auf den `dietpi.txt`-Einstellungen zu testen.

### Verbesserungen

- NanoPi M4V2 | Urspr&uuml;ngliche Hardwarekennung (ID: `58`) und Unterst&uuml;tzung f&uuml;r dieses Ger&auml;t wurde zu DietPi hinzugef&uuml;gt. Vielen Dank an [phpBB:purist](https://dietpi.com/phpbb/memberlist.php?username=purist){: class="nospellcheck"} f&uuml;r diese Anfrage: <https://dietpi.com/phpbb/viewtopic.php?t=6451>
- NanoPi NEO Plus2 | Anf&auml;ngliche Hardwarekennung (ID: 57) und Unterst&uuml;tzung f&uuml;r dieses Ger&auml;t wurde zu DietPi hinzugef&uuml;gt. Vielen Dank an @StephanStS f&uuml;r diese Anfrage und das Erstellen eines Bildes: <https://github.com/MichaIng/DietPi/issues/2979> (Kommentar)
- KIEFER H64 | Urspr&uuml;ngliche Hardwarekennung (ID: 45) und Unterst&uuml;tzung f&uuml;r dieses Ger&auml;t wurde zu DietPi hinzugef&uuml;gt. Vielen Dank an @unixino f&uuml;r diese Anfrage: <https://github.com/MichaIng/DietPi/issues/3286>
- ROCK Pi S | Urspr&uuml;ngliche Hardwarekennung (ID: 73) und Unterst&uuml;tzung f&uuml;r dieses Ger&auml;t wurde zu DietPi hinzugef&uuml;gt. Vielen Dank an @lwqcz f&uuml;r diese Anfrage: <https://github.com/MichaIng/DietPi/issues/3365>
- Sparky SBC | Aktualisierte Kernel-Treiber und SBC-spezifische Dienst- und Konfigurationsdateien
- Allgemeines | Umstellung auf `C.UTF-8` als Standardgebietsschema und f&uuml;r DietPi-Skripte. Es wird statisch per APT-Paket versendet, international und schlanker im Vergleich zu en_GB.UTF-8.
- DietPi-RAMdisk | Von DietPi entfernt, was bedeutet, dass man jetzt direkt Konfigurationsdateien im /boot-Verzeichnis bearbeiten kann. Um die Leistung unserer Skripte aufrechtzuerhalten, wird stattdessen `vmtouch` installiert, das es erm&ouml;glicht, Dateien im nativen Dateisystemcache zu sperren, der so konfiguriert ist, dass `/boot/dietpi` und `/boot/dietpi.txt` standardm&auml;&szlig;ig im Cache gesperrt werden. Weitere Informationen: <https://github.com/MichaIng/DietPi/issues/3288>
- DietPi-LED_Steuerung | LED-Trigger-Auswahlen werden jetzt &uuml;ber 'udev'-Regeln angewendet, bestehende Einstellungen werden auf DietPi-Update migriert. Dies erm&ouml;glicht das Ausf&uuml;hren dieses Skripts beim Booten zu &uuml;berspringen und das Preboot-Skript zu vereinfachen, was sowohl die Bootzeit als auch das Gebot reduziert. Dar&uuml;ber hinaus k&ouml;nnen angewendete LED-Trigger jetzt auf die Systemstandards zur&uuml;ckgesetzt werden, wodurch die zugeh&ouml;rigen udev-Regeln entfernt werden. Da das Skript jetzt nur noch f&uuml;r die interaktive Verwendung bestimmt ist, wurde es nach `/boot/dietpi/dietpi-led_control` verschoben und ein Alias hinzugef&uuml;gt, um es von der Konsole &uuml;ber den Befehl `dietpi-led_control` aufzurufen.
- DietPi-Update | Die automatische Update-Funktion von DietPi wurde entfernt. Unsere Updates erfordern die Aufmerksamkeit der Benutzer, sie enthalten oft tiefere &Auml;nderungen, interaktive Elemente und wichtige Informationen. Wir werden stattdessen in einer sp&auml;teren Version eine automatische APT-Upgrade-Funktion hinzuf&uuml;gen, &auml;hnlich wie `unbeaufsichtigte Upgrades`, aber mit der M&ouml;glichkeit, auch nicht sicherheitsrelevante Patches direkt in dietpi-Update zu aktualisieren. Die &Uuml;berpr&uuml;fung auf verf&uuml;gbare Updates erfolgt wie bisher t&auml;glich, wenn nicht &uuml;ber `dietpi.txt` deaktiviert.
- DietPi-Cron | Erlaubt jetzt, den E-Mail-Empf&auml;nger der Cron-Job-Ausgabe festzulegen. Cron-Mails sind standardm&auml;&szlig;ig deaktiviert, da auf DietPi kein MTA vorkonfiguriert ist. Zus&auml;tzlich werden die Ausf&uuml;hrungszeiten nun &uuml;bersichtlicher im 24h-Format angezeigt.
- DietPi-Autostart | Bei der Auswahl eines Nicht-Root-Benutzers f&uuml;r die automatische Anmeldung werden einige erforderliche Aufgaben, wie Berechtigungen, jetzt automatisch angewendet, basierend auf der Autostart-Option. Dies erm&ouml;glicht insbesondere Nicht-Root-Benutzern, Kodi zu starten, ohne Berechtigungen manuell anzuwenden. Vielen Dank an @sbrl f&uuml;r die Anforderung dieser Funktion: <https://github.com/MichaIng/DietPi/issues/3351>
- DietPi-Drive_Manager | GlusterFS-`fstab`-Eintr&auml;ge werden jetzt beibehalten. Vielen Dank an @Sudrien f&uuml;r die Implementierung dieser Erg&auml;nzung: <https://github.com/MichaIng/DietPi/issues/3374>
- DietPi-Software | Domoticz: Open-Source-Home-Automation-Plattform ist jetzt zur Installation verf&uuml;gbar. Vielen Dank an `AndyB` f&uuml;r diese Anfrage vor langer Zeit: <https://dietpi.com/phpbb/viewtopic.php?t=222>
- DietPi-Software | phpBB: Auf Version 3.3.0 aktualisiert, die PHP7.3-Unterst&uuml;tzung bietet und daher auf allen Hardwaremodellen und Distributionsversionen installiert werden kann.
- DietPi-Software | Sonarr/Radarr/Lidarr: Erweiterte Installations- und Deinstallationsschritte. Bei Neuinstallationen bleibt das Installationsverzeichnis jetzt unver&auml;ndert, was vorschl&auml;gt, stattdessen den internen Updater zu verwenden, der im Allgemeinen sicherer ist und jetzt keinen manuellen Neustart des Dienstes erfordert (siehe Fehlerbehebung unten). Im Falle einer defekten Instanz muss das Installationsverzeichnis `/opt/<name>` jetzt manuell entfernt werden, damit Neuinstallationen die neuesten Bin&auml;rdateien herunterladen und installieren k&ouml;nnen.
- DietPi-Software | Sonarr/Radarr/Lidarr: Der Dienst l&auml;uft jetzt mit geh&auml;rteten Berechtigungen und blockiert standardm&auml;&szlig;ig den Zugriff auf Verzeichnisse au&szlig;erhalb von `/opt/<name>` `/mnt` `/var/log/<name>` und `/tmp`. Wenn in andere Verzeichnisse geschrieben werden soll, muss die Servicedatei bearbeitet werden, am einfachsten mit `dietpi-services` > "" > "Edit" und Hinzuf&uuml;gen eines zus&auml;tzlichen `ReadWritePaths=/path/to/custom/dir`.
- DietPi-Software | Chromium: Entsperrte Installation auf ARMv6-RPi-Modellen: RPi1/Zero/Zero W. Die Browsing-Leistung wird nicht perfekt sein, aber f&uuml;r den Kioskmodus oder die leichte Nutzung gibt es Anwendungsf&auml;lle. Vielen Dank an @kmplngj f&uuml;r die Anfrage und den Test: <https://github.com/MichaIng/DietPi/issues/3364>
- DietPi-Software | myMPD: Aktualisiertes Installationsprogramm gem&auml;&szlig; der n&auml;chsten Upstream-Version v6.2.0. Vielen Dank an @jcorporation f&uuml;r die Information &uuml;ber die neue Version: <https://github.com/MichaIng/DietPi/issues/3382>
- DietPi-Software | MPD: Es wurde sichergestellt, dass UNIX-Domain-Sockets und systemd-Einheiten f&uuml;r die Socket-Aktivierung auf Stretch-Systemen vorhanden sind. Ebenso wird das veraltete Cache-Verzeichnis `symlinks` in `/var/lib/mpd` nicht mehr vorhanden sein. Alle benutzerdefinierten Skripte m&uuml;ssen von nun an die absoluten Pfade in `/mnt/dietpi_userdata/.mpd_cache` verwenden.
- DietPi-Software | Pi-hole: Aktivierte Unterst&uuml;tzung f&uuml;r Pi-hole v5. Vielen Dank an @maartenlangeveld f&uuml;r das Melden der erforderlichen &Auml;nderung: <https://github.com/MichaIng/DietPi/issues/3391>
- DietPi-Software | Shairport-Sync: Aktualisiert auf die neue Version 3.3.6, unter Verwendung selbst kompilierter Deb-Pakete. Vielen Dank an @kmplngj f&uuml;r diese Anfrage: <https://github.com/MichaIng/DietPi/issues/3216>
- DietPi-Software | HAProxy: Aktualisiert auf die neueste stabile Upstream-Version 2.1.3 und der sysvinit-Dienst wurde durch den offiziell bereitgestellten systemd-Dienst ersetzt. Es wird auf allen Systemen per - DietPi-Update neu installiert, Ihre Konfigurationsdateien werden bei einer Neuinstallation nicht angetastet.
- DietPi-Software | rTorrent: Weitere &Uuml;berarbeitung und Aktualisierung der Standard-Konfigurationsdatei. Vielen Dank an @bbsixzz f&uuml;r diesen Beitrag: <https://github.com/MichaIng/DietPi/issues/3332>

### Bemerkenswerte Korrekturen

- Himbeer-Pi | Es wurde ein Problem behoben, bei dem RPi-Modelle im Falle von Garantie, &Uuml;berspannung oder im Revisionscode gesetzten OTP-Bits falsch identifiziert werden konnten. Vielen Dank an @LeeMenHin f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/2979> (Kommentar)
- DietPi-Banner | Es wurde ein Problem behoben, bei dem das L&ouml;schen des Bildschirms aufgrund des fehlenden G_TERM_CLEAR-Befehls fehlschl&auml;gt. Vielen Dank an @Joulinar f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3313>
- DietPi-Config | Es wurde ein Problem behoben, bei dem auf RPi mit aktiviertem Overlay/Treiber `vc4-fkms-v3d` die Auswahl der Soundkarte schief ging. Vielen Dank an @Cybolic f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3356>
- DietPi-Globals | Das Auslesen der CPU-Temperatur auf Intel Mini-PCs wurde behoben. Vielen Dank an @Iv711 und @kt1024 f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3172>, <https://github.com/MichaIng/DietPi/issues/3412>
- DietPi-Drive_Manager | Es wurde ein Problem behoben, bei dem das gew&auml;hlte Spindown-Timeout beim Booten nicht korrekt angewendet wurde. Vielen Dank an @tesseract241 und @lukaszm89 f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3309>, <https://github.com/MichaIng/DietPi/issues/3420>
- DietPi-Drive_Manager | Es wurde ein Problem behoben, bei dem NFS-Bereitstellungen vor v3 beim Booten fehlgeschlagen sein konnten. Sie werden jetzt automatisch beim ersten Zugriff auf den Einh&auml;ngepunkt gemountet, wie es bereits `NFSv3`- und `Samba`-Freigaben tun. Vielen Dank an @Joulinar f&uuml;r das Melden und Debuggen dieses Problems: <https://github.com/MichaIng/DietPi/issues/1898> (Kommentar)
- DietPi-Drive_Manager | Es wurde ein Problem behoben, bei dem Samba/SMB/CIFS-Mounts fehlschlugen, wenn der Freigabename Leerzeichen enthielt. Vielen Dank an [phpBB:SNG](https://dietpi.com/phpbb/memberlist.php?username=SNG){: class="nospellcheck"} f&uuml;r die Meldung dieses Problems: <https://dietpi.com/phpbb/viewtopic.php?t=7518>
- DietPi-Software | Es wurde ein Problem behoben, bei dem das Extrahieren von ZIP-Archiven in das aktuelle Verzeichnis fehlschlug. Vielen Dank an @ben0rism f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3320>
- DietPi-Software | Redis: Es wurde ein Problem behoben, bei dem der Dienststart auf Stretch-Systemen fehlschl&auml;gt. Vielen Dank an @drieksje f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3314>
- DietPi-Software | Sonarr/Radarr/Lidarr: Es wurde ein Problem behoben, bei dem ein manueller Dienstneustart erforderlich war, nachdem der interne Updater verwendet wurde.
- DietPi-Software | myMPD: MPD-Verbindungsprobleme auf Stretch-Systemen behoben. Vielen Dank an @jcorporation f&uuml;r die Information &uuml;ber Upstream-&Auml;nderungen, Hilfe beim Debuggen und Beheben der Probleme: <https://github.com/MichaIng/DietPi/issues/3382>
- DietPi-Software | O!MPD: Es wurde ein Problem behoben, bei dem die YouTube-Unterst&uuml;tzung aufgrund fehlender youtube-dl-Ausf&uuml;hrungsberechtigungen standardm&auml;&szlig;ig nicht funktionierte. Vielen Dank an @ArturSierzant f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3413>
- DietPi-Software | GMediaRender: Es wurde ein Problem behoben, bei dem das falsche Soundger&auml;t verwendet werden konnte. Vielen Dank an @kikigarel f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3348>
- DietPi-Software | Chromium: Es wurde ein Problem behoben, bei dem Nicht-Root-Benutzer die Autostart-Option von Chromium aufgrund falscher Berechtigungen nicht verwenden konnten. Vielen Dank an @lasers und @promofu f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3322>
- DietPi-Software | RPi Cam Control: Es wurde ein Problem behoben, bei dem die Kamera &uuml;ber die Web-Benutzeroberfl&auml;che aufgrund fehlender Berechtigungen fehlschlug. Vielen Dank an @arkhub f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3431>
- DietPi-Software | OctoPrint: Es wurde ein Problem behoben, bei dem die Installation fehlschlug. Vielen Dank an @zell-mbc und @Joulinar f&uuml;r die Meldung des Problems und die Bereitstellung der L&ouml;sung: <https://github.com/MichaIng/DietPi/issues/3474>
- DietPi-Software | Koel: Es wurde ein Problem behoben, bei dem der Download aufgrund eines ge&auml;nderten GitHub-Links fehlgeschlagen ist. Vielen Dank an @C-Fu und @Joulinar f&uuml;r die Meldung und Identifizierung des Problems: <https://github.com/MichaIng/DietPi/issues/3482>
- DietPi-Software | Mopidy: Es wurde ein Problem behoben, bei dem Installationen auf Debian Buster und h&ouml;her nicht vollst&auml;ndig waren, da Mopidy v3 Python 3 verwendet. Vielen Dank an @lupa18 f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3485>
- DietPi-Software | Nextcloud Talk: Es wurde ein externer Fehler umgangen, bei dem die Nextcloud Talk-App nicht installiert werden konnte. Vielen Dank an @harmlessdrudge f&uuml;r die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3499>
