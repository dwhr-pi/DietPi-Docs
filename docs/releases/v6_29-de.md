# Versionshinweise

## Mai 2020 (Version 6.29)

### API-Änderungen

- Hardware-Info | Die Hardware-Infodatei `/DietPi/dietpi/.hw_model` sollte jetzt unter `/boot/dietpi/.hw_model` aufgerufen werden (siehe DietPi-RAMdisk-Entfernung unten) und enthält jetzt Informationen als NAME=VALUE-ähnliche Zeilen, die bezogen werden können aus Shell-Skripten.
- Flag/Info-Dateien | `/DietPi/dietpi/.update_available`, `/DietPi/dietpi/.timesync_exit_status`, `/DietPi/dietpi/.network` und `/tmp/.dietpi_motd` wurden alle in ein neues Laufzeitverzeichnis verschoben: `/run /dietpi/`
- DietPi-Globals | Die globalen Variablen `G_HW_ARCH_DESCRIPTION` und `G_HW_MODEL_DESCRIPTION` wurden umbenannt in `G_HW_ARCH_NAME` und `G_HW_MODEL_NAME`. Die neuen Variablen `G_HW_UUID` (DietPi-interne Geräte-UUID) und `G_ROOTFS_DEV` (RootFS-Gerätepfad) sind verfügbar. Auf RPi sind zusätzlich `G_HW_REVISION`, `G_HW_PCB_REVISION`, `G_HW_MEMORY_SIZE` und `G_HW_MANUFACTURER` verfügbar, der Revisionscode und seine entschlüsselten Informationen: <https://www.raspberrypi.org/documentation>
- DietPi-Globals | `G_RUN_CMD` und `G_ERROR_HANDLER` wurden entfernt und durch `G_EXEC` ersetzt. Grundsätzlich kann `G_EXEC` auf die gleiche Weise verwendet werden wie zuvor `G_RUN_CMD` und es ist umfassender konfigurierbar, um die manuelle Verwendung von `G_ERROR_HANDLER` obsolet zu machen, wenn benutzerdefinierte Lösungsmenüeinträge oder Befehlsausgabenanalyse erforderlich sind, zB um nach Fehlern zu suchen, die nicht zum Beenden führen Codes. Visuelle Änderung für normale DietPi-Benutzer besteht darin, dass jeder fehlerbehandelte Befehl wiederholt werden kann, eine Subshell geöffnet werden kann, um das ursprüngliche Problem zu untersuchen oder zu beheben, und für erfahrene Benutzer der Befehl geändert werden kann, z. B. wenn sich ein Download-Link geändert hat oder ein erwarteter Datei wurde manuell in einen neuen Pfad verschoben. Weitere Details finden Sie im Skript: `/boot/dietpi/func/dietpi-globals`
- DietPi-Globals | `G_FILE_EXISTS` wurde entfernt, da es nur ein einziges Mal in unserem Code verwendet wurde und normalerweise explizit überprüft und behandelt werden muss, ob es sich um eine Datei, ein Verzeichnis, einen Symlink mit oder ohne vorhandenes Ziel handelt.
- DietPi-Globals | Die neuen globalen Funktionen „G_CHECK_CON“ und „G_CHECK_DNS“ wurden hinzugefügt, um die allgemeine Netzwerkkonnektivität und den DNS-Resolver basierend auf den „dietpi.txt“-Einstellungen zu testen.

### Verbesserungen

- NanoPi M4V2 | Ursprüngliche Hardwarekennung (ID: `58`) und Unterstützung für dieses Gerät wurde zu DietPi hinzugefügt. Vielen Dank an [phpBB:purist](https://dietpi.com/phpbb/memberlist.php?username=purist){: class="nospellcheck"} für diese Anfrage: <https://dietpi.com/phpbb/ viewtopic.php?t=6451>
- NanoPi NEO Plus2 | Anfängliche Hardwarekennung (ID: 57) und Unterstützung für dieses Gerät wurde zu DietPi hinzugefügt. Vielen Dank an @StephanStS für diese Anfrage und das Erstellen eines Bildes: <https://github.com/MichaIng/DietPi/issues/2979> (Kommentar)
- KIEFER H64 | Ursprüngliche Hardwarekennung (ID: 45) und Unterstützung für dieses Gerät wurde zu DietPi hinzugefügt. Vielen Dank an @unixino für diese Anfrage: <https://github.com/MichaIng/DietPi/issues/3286>
- ROCK Pi S | Ursprüngliche Hardwarekennung (ID: 73) und Unterstützung für dieses Gerät wurde zu DietPi hinzugefügt. Vielen Dank an @lwqcz für diese Anfrage: <https://github.com/MichaIng/DietPi/issues/3365>
- Sparky SBC | Aktualisierte Kernel-Treiber und SBC-spezifische Dienst- und Konfigurationsdateien
- Allgemeines | Umstellung auf `C.UTF-8` als Standardgebietsschema und für DietPi-Skripte. Es wird statisch per APT-Paket versendet, international und schlanker im Vergleich zu en_GB.UTF-8.
- DietPi-RAMdisk | Von DietPi entfernt, was bedeutet, dass man jetzt direkt Konfigurationsdateien im /boot-Verzeichnis bearbeiten kann. Um die Leistung unserer Skripte aufrechtzuerhalten, wird stattdessen `vmtouch` installiert, das es ermöglicht, Dateien im nativen Dateisystemcache zu sperren, der so konfiguriert ist, dass `/boot/dietpi` und `/boot/dietpi.txt` standardmäßig im Cache gesperrt werden. Weitere Informationen: <https://github.com/MichaIng/DietPi/issues/3288>
- DietPi-LED_Steuerung | LED-Trigger-Auswahlen werden jetzt über 'udev'-Regeln angewendet, bestehende Einstellungen werden auf DietPi-Update migriert. Dies ermöglicht das Ausführen dieses Skripts beim Booten zu überspringen und das Preboot-Skript zu vereinfachen, was sowohl die Bootzeit als auch das Gebot reduziert. Darüber hinaus können angewendete LED-Trigger jetzt auf die Systemstandards zurückgesetzt werden, wodurch die zugehörigen udev-Regeln entfernt werden. Da das Skript jetzt nur noch für die interaktive Verwendung bestimmt ist, wurde es nach `/boot/dietpi/dietpi-led_control` verschoben und ein Alias hinzugefügt, um es von der Konsole über den Befehl `dietpi-led_control` aufzurufen.
- DietPi-Update | Die automatische Update-Funktion von DietPi wurde entfernt. Unsere Updates erfordern die Aufmerksamkeit der Benutzer, sie enthalten oft tiefere Änderungen, interaktive Elemente und wichtige Informationen. Wir werden stattdessen in einer späteren Version eine automatische APT-Upgrade-Funktion hinzufügen, ähnlich wie „unbeaufsichtigte Upgrades“, aber mit der Möglichkeit, auch nicht sicherheitsrelevante Patches direkt in dietpi-Update zu aktualisieren. Die Überprüfung auf verfügbare Updates erfolgt wie bisher täglich, wenn nicht über `dietpi.txt` deaktiviert.
- DietPi-Cron | Erlaubt jetzt, den E-Mail-Empfänger der Cron-Job-Ausgabe festzulegen. Cron-Mails sind standardmäßig deaktiviert, da auf DietPi kein MTA vorkonfiguriert ist. Zusätzlich werden die Ausführungszeiten nun übersichtlicher im 24h-Format angezeigt.
- DietPi-Autostart | Bei der Auswahl eines Nicht-Root-Benutzers für die automatische Anmeldung werden einige erforderliche Aufgaben, wie Berechtigungen, jetzt automatisch angewendet, basierend auf der Autostart-Option. Dies ermöglicht insbesondere Nicht-Root-Benutzern, Kodi zu starten, ohne Berechtigungen manuell anzuwenden. Vielen Dank an @sbrl für die Anforderung dieser Funktion: <https://github.com/MichaIng/DietPi/issues/3351>
- DietPi-Drive_Manager | GlusterFS-`fstab`-Einträge werden jetzt beibehalten. Vielen Dank an @Sudrien für die Implementierung dieser Ergänzung: <https://github.com/MichaIng/DietPi/issues/3374>
- DietPi-Software | Domoticz: Open-Source-Home-Automation-Plattform ist jetzt zur Installation verfügbar. Vielen Dank an `AndyB` für diese Anfrage vor langer Zeit: <https://dietpi.com/phpbb/viewtopic.php?t=222>
- DietPi-Software | phpBB: Auf Version 3.3.0 aktualisiert, die PHP7.3-Unterstützung bietet und daher auf allen Hardwaremodellen und Distributionsversionen installiert werden kann.
- DietPi-Software | Sonarr/Radarr/Lidarr: Erweiterte Installations- und Deinstallationsschritte. Bei Neuinstallationen bleibt das Installationsverzeichnis jetzt unverändert, was vorschlägt, stattdessen den internen Updater zu verwenden, der im Allgemeinen sicherer ist und jetzt keinen manuellen Neustart des Dienstes erfordert (siehe Fehlerbehebung unten). Im Falle einer defekten Instanz muss das Installationsverzeichnis `/opt/<name>` jetzt manuell entfernt werden, damit Neuinstallationen die neuesten Binärdateien herunterladen und installieren können.
- DietPi-Software | Sonarr/Radarr/Lidarr: Der Dienst läuft jetzt mit gehärteten Berechtigungen und blockiert standardmäßig den Zugriff auf Verzeichnisse außerhalb von `/opt/<name>` `/mnt` `/var/log/<name>` und `/tmp`. Wenn in andere Verzeichnisse geschrieben werden soll, muss die Servicedatei bearbeitet werden, am einfachsten mit `dietpi-services` > "" > "Edit" und Hinzufügen eines zusätzlichen `ReadWritePaths=/path/to/custom/dir`.
- DietPi-Software | Chromium: Entsperrte Installation auf ARMv6-RPi-Modellen: RPi1/Zero/Zero W. Die Browsing-Leistung wird nicht perfekt sein, aber für den Kioskmodus oder die leichte Nutzung gibt es Anwendungsfälle. Vielen Dank an @kmplngj für die Anfrage und den Test: <https://github.com/MichaIng/DietPi/issues/3364>
- DietPi-Software | myMPD: Aktualisiertes Installationsprogramm gemäß der nächsten Upstream-Version v6.2.0. Vielen Dank an @jcorporation für die Information über die neue Version: <https://github.com/MichaIng/DietPi/issues/3382>
- DietPi-Software | MPD: Es wurde sichergestellt, dass UNIX-Domain-Sockets und systemd-Einheiten für die Socket-Aktivierung auf Stretch-Systemen vorhanden sind. Ebenso wird das veraltete Cache-Verzeichnis `symlinks` in `/var/lib/mpd` nicht mehr vorhanden sein. Alle benutzerdefinierten Skripte müssen von nun an die absoluten Pfade in `/mnt/dietpi_userdata/.mpd_cache` verwenden.
- DietPi-Software | Pi-hole: Aktivierte Unterstützung für Pi-hole v5. Vielen Dank an @maartenlangeveld für das Melden der erforderlichen Änderung: <https://github.com/MichaIng/DietPi/issues/3391>
- DietPi-Software | Shairport-Sync: Aktualisiert auf die neue Version 3.3.6, unter Verwendung selbst kompilierter Deb-Pakete. Vielen Dank an @kmplngj für diese Anfrage: <https://github.com/MichaIng/DietPi/issues/3216>
- DietPi-Software | HAProxy: Aktualisiert auf die neueste stabile Upstream-Version 2.1.3 und der sysvinit-Dienst wurde durch den offiziell bereitgestellten systemd-Dienst ersetzt. Es wird auf allen Systemen per - DietPi-Update neu installiert, Ihre Konfigurationsdateien werden bei einer Neuinstallation nicht angetastet.
- DietPi-Software | rTorrent: Weitere Überarbeitung und Aktualisierung der Standard-Konfigurationsdatei. Vielen Dank an @bbsixzz für diesen Beitrag: <https://github.com/MichaIng/DietPi/issues/3332>

### Bemerkenswerte Korrekturen

- Himbeer-Pi | Es wurde ein Problem behoben, bei dem RPi-Modelle im Falle von Garantie, Überspannung oder im Revisionscode gesetzten OTP-Bits falsch identifiziert werden konnten. Vielen Dank an @LeeMenHin für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/2979> (Kommentar)
- DietPi-Banner | Es wurde ein Problem behoben, bei dem das Löschen des Bildschirms aufgrund des fehlenden G_TERM_CLEAR-Befehls fehlschlägt. Vielen Dank an @Joulinar für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3313>
- DietPi-Config | Es wurde ein Problem behoben, bei dem auf RPi mit aktiviertem Overlay/Treiber „vc4-fkms-v3d“ die Auswahl der Soundkarte schief ging. Vielen Dank an @Cybolic für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3356>
- DietPi-Globals | Das Auslesen der CPU-Temperatur auf Intel Mini-PCs wurde behoben. Vielen Dank an @Iv711 und @kt1024 für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3172>, <https://github.com/MichaIng/DietPi/issues/3412>
- DietPi-Drive_Manager | Es wurde ein Problem behoben, bei dem das gewählte Spindown-Timeout beim Booten nicht korrekt angewendet wurde. Vielen Dank an @tesseract241 und @lukaszm89 für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3309>, <https://github.com/MichaIng/DietPi/issues/3420>
- DietPi-Drive_Manager | Es wurde ein Problem behoben, bei dem NFS-Bereitstellungen vor v3 beim Booten fehlgeschlagen sein konnten. Sie werden jetzt automatisch beim ersten Zugriff auf den Einhängepunkt gemountet, wie es bereits `NFSv3`- und `Samba`-Freigaben tun. Vielen Dank an @Joulinar für das Melden und Debuggen dieses Problems: <https://github.com/MichaIng/DietPi/issues/1898> (Kommentar)
- DietPi-Drive_Manager | Es wurde ein Problem behoben, bei dem Samba/SMB/CIFS-Mounts fehlschlugen, wenn der Freigabename Leerzeichen enthielt. Vielen Dank an [phpBB:SNG](https://dietpi.com/phpbb/memberlist.php?username=SNG){: class="nospellcheck"} für die Meldung dieses Problems: <https://dietpi.com/phpbb /viewtopic.php?t=7518>
- DietPi-Software | Es wurde ein Problem behoben, bei dem das Extrahieren von ZIP-Archiven in das aktuelle Verzeichnis fehlschlug. Vielen Dank an @ben0rism für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3320>
- DietPi-Software | Redis: Es wurde ein Problem behoben, bei dem der Dienststart auf Stretch-Systemen fehlschlägt. Vielen Dank an @drieksje für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3314>
- DietPi-Software | Sonarr/Radarr/Lidarr: Es wurde ein Problem behoben, bei dem ein manueller Dienstneustart erforderlich war, nachdem der interne Updater verwendet wurde.
- DietPi-Software | myMPD: MPD-Verbindungsprobleme auf Stretch-Systemen behoben. Vielen Dank an @jcorporation für die Information über Upstream-Änderungen, Hilfe beim Debuggen und Beheben der Probleme: <https://github.com/MichaIng/DietPi/issues/3382>
- DietPi-Software | O!MPD: Es wurde ein Problem behoben, bei dem die YouTube-Unterstützung aufgrund fehlender youtube-dl-Ausführungsberechtigungen standardmäßig nicht funktionierte. Vielen Dank an @ArturSierzant für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3413>
- DietPi-Software | GMediaRender: Es wurde ein Problem behoben, bei dem das falsche Soundgerät verwendet werden konnte. Vielen Dank an @kikigarel für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3348>
- DietPi-Software | Chromium: Es wurde ein Problem behoben, bei dem Nicht-Root-Benutzer die Autostart-Option von Chromium aufgrund falscher Berechtigungen nicht verwenden konnten. Vielen Dank an @lasers und @promofu für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3322>
- DietPi-Software | RPi Cam Control: Es wurde ein Problem behoben, bei dem die Kamera über die Web-Benutzeroberfläche aufgrund fehlender Berechtigungen fehlschlug. Vielen Dank an @arkhub für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3431>
- DietPi-Software | OctoPrint: Es wurde ein Problem behoben, bei dem die Installation fehlschlug. Vielen Dank an @zell-mbc und @Joulinar für die Meldung des Problems und die Bereitstellung der Lösung: <https://github.com/MichaIng/DietPi/issues/3474>
- DietPi-Software | Koel: Es wurde ein Problem behoben, bei dem der Download aufgrund eines geänderten GitHub-Links fehlgeschlagen ist. Vielen Dank an @C-Fu und @Joulinar für die Meldung und Identifizierung des Problems: <https://github.com/MichaIng/DietPi/issues/3482>
- DietPi-Software | Mopidy: Es wurde ein Problem behoben, bei dem Installationen auf Debian Buster und höher nicht vollständig waren, da Mopidy v3 Python 3 verwendet. Vielen Dank an @lupa18 für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3485>
- DietPi-Software | Nextcloud Talk: Es wurde ein externer Fehler umgangen, bei dem die Nextcloud Talk-App nicht installiert werden konnte. Vielen Dank an @harmlessdrudge für die Meldung dieses Problems: <https://github.com/MichaIng/DietPi/issues/3499>
